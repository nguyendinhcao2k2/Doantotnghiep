<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<!-- begin::Head -->
<head>
    <meta charset="utf-8"/>
    <title>Xem chi tiết nhóm DATN | FCR FPT Polytechnic</title>
    <meta name="description" content="Static table examples">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no">
    <link th:href="@{/assets/vendors/base/vendors.bundle.css}" rel="stylesheet" type="text/css"/>
    <link th:href="@{/assets/demo/default/base/style.bundle.css}" rel="stylesheet" type="text/css"/>
    <link rel="shortcut icon" href="https://ap.poly.edu.vn/images/favicon.ico"/>
    <link rel="stylesheet" type="text/css" th:href="@{/css/plugin/query-ui.css}">
    <link th:href="@{/css/plugin/bootstrap.min.css}" rel="stylesheet" type="text/css"/>
    <link th:href="@{/css/custom/button-icon.css}" rel="stylesheet" type="text/css"/>
</head>
<!-- end::Head -->

<!-- begin::Body -->
<body class="m-page--fluid m--skin- m-content--skin-light2 m-header--fixed m-header--fixed-mobile m-aside-left--enabled m-aside-left--skin-dark m-aside-left--fixed m-aside-left--offcanvas m-footer--push m-aside--offcanvas-default">

<!-- begin:: Page -->
<div class="m-grid m-grid--hor m-grid--root m-page">

    <div th:insert="~{fragment/header-fragment :: header}"></div>

    <!-- begin::Body -->
    <div class="m-grid__item m-grid__item--fluid m-grid m-grid--ver-desktop m-grid--desktop m-body">

        <div th:insert="~{fragment/menu-fragment-sinh-vien :: menu}"></div>

        <!-- END: Left Aside -->
        <div class="m-grid__item m-grid__item--fluid m-wrapper">
            <!-- END: Subheader -->
            <div>
                <div class="m-content">
                    <h3>Nhóm dự án tốt nghiệp</h3>
                    <div class="mt-5">
                        <section class="fillter-area  mb-5">
                            <div class="m-portlet">
                                <div class="m-portlet__head">
                                    <div class="m-portlet__head-caption">
                                        <div class="m-portlet__head-title">
                                <span class="m-portlet__head-icon">
                                    <i class="m-menu__link-icon flaticon-web"></i>
                                </span>
                                            <h3 class="m-portlet__head-text">
                                                Thông tin
                                            </h3>
                                        </div>
                                    </div>
                                </div>
                                <form
                                        class="m-portlet__body">
                                    <div class="form-group row">
                                        <label class="col-xl-3 col-lg-3 col-form-label">Mã
                                            nhóm</label>
                                        <div class="col-lg-9 col-xl-6">
                                            <input type="text"
                                                   th:value="${nhomDatnThamGia[0].maNhom}"
                                                   readonly="readonly" class="form-control">
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-xl-3 col-lg-3 col-form-label">Tên
                                            nhóm</label>
                                        <div class="col-lg-9 col-xl-6">
                                            <input type="text"
                                                   th:value="${nhomDatnThamGia[0].tenNhom} == null ? 'Chưa có' : ${nhomDatnThamGia[0].tenNhom}"
                                                   readonly="readonly" class="form-control">
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-xl-3 col-lg-3 col-form-label">Tên đợt đăng
                                            ký</label>
                                        <div class="col-lg-9 col-xl-6">
                                            <input type="text"
                                                   th:value="${nhomDatnThamGia[0].tenDotDangKy}"
                                                   readonly="readonly" class="form-control">
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-xl-3 col-lg-3 col-form-label">Tên đề
                                            tài</label>
                                        <div class="col-lg-9 col-xl-6">
                                            <input type="text"
                                                   th:value="${nhomDatnThamGia[0].tenDeTai} == null ? 'Chưa có' : ${nhomDatnThamGia[0].tenDeTai}"
                                                   readonly="readonly" class="form-control">
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-xl-3 col-lg-3 col-form-label">Tên
                                            GVHD</label>
                                        <div class="col-lg-9 col-xl-6">
                                            <input type="text"
                                                   th:value="${nhomDatnThamGia[0].tenGvhd} == null ? '*Chưa có giảng viên hướng dẫn*' : ${nhomDatnThamGia[0].tenGvhd}"
                                                   readonly="readonly" class="form-control">
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-xl-3 col-lg-3 col-form-label">Tên môn dự án tốt nghiệp</label>
                                        <div class="col-lg-9 col-xl-6">
                                            <input type="text"
                                                   th:value="${nhomDatnThamGia[0].tenMonDatn}"
                                                   readonly="readonly" class="form-control">
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-xl-3 col-lg-3 col-form-label">Trạng
                                            thái</label>
                                        <div class="col-lg-9 col-xl-6">
                                            <input type="text"
                                                   th:value="${T(com.fpolydatn.util.TrangThaiNhomConverter).ConvertToTrangThai(nhomDatnThamGia[0].getTrangThai())}"
                                                   readonly="readonly" class="form-control">
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-xl-3 col-lg-3 col-form-label">
                                            Mật khẩu
                                        </label>
                                        <div class="col-lg-9 col-xl-6">
                                            <input type="text"
                                                   th:value="${nhomDatnThamGia[0].getMatKhau()} == null ? 'Công khai' : ${nhomDatnThamGia[0].getMatKhau()}"
                                                   readonly="readonly" class="form-control">
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-xl-3 col-lg-3 col-form-label">Nhận
                                            xét</label>
                                        <div class="col-lg-9 col-xl-6">
                                            <textarea
                                                    th:text="${nhomDatnThamGia[0].getNhanXet()}"
                                                    readonly="readonly" class="form-control">
                                            </textarea>
                                        </div>
                                    </div>

                                    <div class="row justify-content-center pt-2">
                                        <div
                                                th:style="${checkMocThoiGian} == true
                                                            and ${nhomDatnThamGia[0].getTrangThai()} == 0
                                                            and ${checkTruongNhom} == true ? '' : 'display: none'"
                                        >
                                            <button
                                                    type="button" class="btn btn-primary"
                                                    th:attr="onclick=|openModalDoiDeTai()|">
                                                Đổi tên đề tài
                                            </button>
                                            <button
                                                    type="button" class="btn btn-primary"
                                                    th:attr="onclick=|openModalChonGVHD()|">
                                                Chọn GVHG
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </section>

                        <div class="m-portlet">
                            <div class="m-portlet">
                                <div class="m-portlet__body">
                                    <h3>Danh sách thành viên nhóm</h3>
                                    <div class="modal-body">
                                        <div class="form-group">
                                            <table id="custom-table"
                                                   style="text-align: center"
                                                   class="table table-bordered m-table d-sm-table m-table--head-bg-primary">
                                                <thead>
                                                <th width="50px">STT</th>
                                                <th>Mã Sinh Viên</th>
                                                <th>Tên Sinh Viên</th>
                                                <th>Môn Theo Chương Trình</th>
                                                <th>Chức Vụ</th>
                                                <th
                                                        th:style="${checkMocThoiGian} == false or ${soThanhVien} == 1 ? 'display:none' :
                                                                (${checkTruongNhom} == false ? 'display:none' : 'display:block')"
                                                >
                                                    Chức năng
                                                </th>
                                                </thead>
                                                <tbody>
                                                <th:block th:each="SvNhomDatn : ${nhomDatnThamGia}">
                                                    <tr>
                                                        <td th:text="${SvNhomDatn.getStt()}"></td>
                                                        <td th:text="${SvNhomDatn.getMaSinhVien()}"></td>
                                                        <td th:text="${SvNhomDatn.getTenSinhVien()}"></td>
                                                        <td th:text="${SvNhomDatn.getTenMonChuongTrinh()}"></td>
                                                        <td th:text="${SvNhomDatn.getChucVu()} == 1 ? 'Trưởng nhóm' : 'Thành viên'"></td>
                                                        <td
                                                                th:style="${checkMocThoiGian} == false or ${soThanhVien} == 1 ? 'display:none' :
                                                                            (${checkTruongNhom} == false ? 'display:none' :
                                                                            (${SvNhomDatn.getChucVu()} == 1 ? 'display: none' : 'display: block'))"
                                                        >
                                                            <button
                                                                    class="btn_change_role"
                                                                    data-toggle="tooltip"
                                                                    title="Chuyển quyền trưởng nhóm"
                                                                    th:attr="onclick=|chuyenQuyenTruongNhom('${SvNhomDatn.getIdSinhVien()}', '${SvNhomDatn.getTenSinhVien()}')|"
                                                            >
                                                                <img th:src="@{/img/change-role.svg}">
                                                            </button>
                                                        </td>
                                                    </tr>
                                                </th:block>
                                                </tbody>
                                            </table>
                                            <div
                                                    th:style="${checkMocThoiGian} == false ? 'display:none' :
                                                                (${soThanhVien} == 1 ? 'display: block' :
                                                                (${checkTruongNhom} == true ? 'display:none' : 'display:block'))">
                                                <button
                                                        class="btn btn-danger text-white"
                                                        th:attr="onclick=|confirmRoiNhom(${soThanhVien})|">
                                                    Rời nhóm
                                                </button>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- end:: Body -->
</div>
<!--  Begin modal chọn giảng viên-->
<div class="modal fade " id="modal_chon_giang_vien" tabindex="-1"
     aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <form id="form_chon_giang_vien">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Đăng
                        ký
                        nhóm Dự án tốt nghiệp</h5>
                    <button type="button" class="close"
                            data-bs-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label class="col-form-label">Chọn giảng viên hướng dẫn</label>
                        <select class="form-control col-12"
                                id="chonGiangVien">
                            <option th:each="giangVien : ${listGiangVien}"
                                    th:text="${giangVien.getTenGvhd}"
                                    th:value="${giangVien.getId}"></option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary btn btn-light"
                            data-bs-dismiss="modal">Hủy
                    </button>
                    <button type="button" class="btn btn-primary"
                            th:attr="onclick=|chonGiangVienHuongDan()|">
                        Đồng ý
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
<!--  End modal chọn giảng viên-->
<!--                        begin Đổi tên đề tài-->
<div
        class="modal fade"
        tabindex="-1"
        id="modal_doi_ten_de_Tai"
        aria-labelledby="exampleModalLabel"
        aria-hidden="true">
    <div class="modal-dialog modal-lg modal-lg"
         role="document">
        <div class="modal-content">
            <form id="form_doi_ten_de_tai">
                <div class="modal-header">
                    <h5 class="modal-title">Đổi tên đề tài</h5>
                    <button type="button" class="close"
                            data-bs-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <br>
                        <label class="col-form-label">Tên đề tài</label>
                        <input
                                type="text"
                                class="form-control"
                                id="inputTenDeTai">
                        <span class="text-danger"
                              id="errorTenDeTai"></span><br>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary btn btn-light"
                            data-bs-dismiss="modal">Hủy
                    </button>
                    <button
                            type="button" class="btn btn-primary"
                            th:attr="onclick=|doiTenDeTai()|"
                    >Đổi tên đề tài
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
<!--                        end Đổi tên đề tài-->
<script th:src="@{/assets/vendors/base/vendors.bundle.js}" type="text/javascript"></script>
<script th:src="@{/assets/demo/default/base/scripts.bundle.js}" type="text/javascript"></script>
<script src="https://code.jquery.com/jquery-3.3.1.js"></script>
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"></script>
<script th:src="@{/js/custom/sinhvien/svNhomDatn.js}" type="text/javascript"></script>
<script th:src="@{/plugins/bootstrap/js/bootstrap.bundle.js}"></script>
<script th:src="@{/js/plugin/bootbox.min.js}"></script>
</body>
</html>